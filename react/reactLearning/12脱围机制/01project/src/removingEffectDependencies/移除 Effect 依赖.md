# 移除 Effect 依赖

不必要的依赖可能导致陷入死循环

## 依赖应该和代码保持一致

当你编写 Effect 时，无论这个 Effect 要做什么，你首先要明确其*声明周期*

### 当要移除一个依赖时，请证明它不是一个依赖

你不能“选择” Effect 的依赖。每个被 Effect 所使用的响应式值，必须在依赖中声明。_依赖是由 Effect 的代码决定的_
**响应式值包括 props 以及所有你直接在组件中声明的变量和函数**
如果要移除一个依赖，要证明它不是一个依赖，例如，改成一个该组件之外的全局变量，证明它不是响应式的

### 要改变依赖，请改变代码

1. 首先，你 改变 Effect 的代码 或响应式值的声明方式
2. 然后，你采纳 linter 的建议，调整依赖，以 匹配你所改变的代码
3. 如果你对依赖不满意，你可以 回到第一步（并再次修改代码）

**如果你想改变依赖，首先要改变所涉及到的代码**

## 移除非必要的依赖

当一个依赖重新改变时，重新执行 Effect，思考一下，这个执行有没有意义，有的时候回到是：没有意义
意义？有时，答案是“不”：

- 你可能想在不同的条件下重新执行 Effect 的 不同部分
- 你可能想只读取某个依赖的 最新值，而不是对其变化做出“反应”
- 依赖可能会因为它的类型是对象或函数而 无意间 改变太频繁

### 这段代码应该移到事件处理程序中吗？

### Effect 是否在做几个不相关的事情？

### 是否在读取一些状态来计算下一个状态

### 你想读取一个值而不对其变化做出“反应”吗？

stateSetter 利用*更新函数*的形式，这样在 Effect 中读取的就不是状态本身，不用将该 state 加入到依赖数组中

### 一些响应式值是否无意中改变了？
