# 你可能不需要 Effect
## 如何移除不必要的 Effect
两种不必要使用 Effect 的情况
1. 不必使用 Effect 来转换渲染所需要的数据
2. 不必使用 Effect 来处理用户事件

### 根据 props 或 state 来更新 state
如果可以通过现有的 props 或者 state 计算出来，不要设置成新的 state，设置成普通变量，渲染中计算就可以了

### 缓存昂贵的计算
使用 useMemo
传入 useMemo 的函数是在渲染中计算的，因此只能是纯函数
注意不会让第一次渲染加快，只是可能节省后续渲染中，多余的极端

### 当 props 变化时重置所有 state
好的做法是，在组件上绑定 key，在 props 变动的时候，key 的值也改变，导致组件重新触发挂载

### 当 prop 变化时调整部分 state
直接在渲染期间修改 state

### 在事件处理函数中共享逻辑
### 发送 POST 请求
如果是在特定的用户交互引发的，放在事件回调中
如果是在屏幕上看到组件出现时引发的，放在 effect 中

### 链式计算

### 初始化应用
+ 添加顶层变量
+ 在模块初始化之前就执行

### 通知父组件有关 state 变化的信息
### 将数据传递给父组件
### 订阅外部 store
### 获取数据